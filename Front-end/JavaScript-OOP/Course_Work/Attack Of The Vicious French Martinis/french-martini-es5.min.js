'use strict';var _createClass=function(){function c(d,f){for(var h,g=0;g<f.length;g++)h=f[g],h.enumerable=h.enumerable||!1,h.configurable=!0,'value'in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}return function(d,f,g){return f&&c(d.prototype,f),g&&c(d,g),d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(c,d){if(!c)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return d&&('object'==typeof d||'function'==typeof d)?d:c}function _inherits(c,d){if('function'!=typeof d&&null!==d)throw new TypeError('Super expression must either be null or a function, not '+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var PLAYER={STARTING_POSITION_X:400,STARTING_POSITION_Y:404,MAX_SPEED:400,HEAD:{STARTING_POSITION_X:396,STARTING_POSITION_Y:360}},BAR={BORDER_POSITION_X:0,BORDER_POSITION_Y:448},BULLET={SPEED:400,SPACING:450},MARTINI={whiteMartini:{minimumDelay:1e3,maximumDelay:3e3,initialSpeed:100,explosionSpeed:12},redMartini:{minimumDelay:1e4,maximumDelay:14000,initialSpeed:100,explosionSpeed:30}},GAME_VARIABLES={weaponLevel:1,factorDifficulty:1,score:250,gameOverMessage:'GAME OVER!',repositoryHref:'https://github.com/FrenchMartiniTM/AttackOfTheViciousFrenchMartinis'},Bartender=function(c){function d(f,g){_classCallCheck(this,d);var h=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,PLAYER.STARTING_POSITION_X,PLAYER.STARTING_POSITION_Y,g));return h.anchor.setTo(0.5,0.5),h.lives=3,f.physics.enable(h,Phaser.Physics.ARCADE),h.body.maxVelocity.setTo(PLAYER.MAX_SPEED,PLAYER.MAX_SPEED),f.add.existing(h),h}return _inherits(d,c),_createClass(d,[{key:'update',value:function(){this.x>this.game.width-50&&(this.x=this.game.width-50),50>this.x&&(this.x=50)}},{key:'moveLeft',value:function moveLeft(){this.body.velocity.x=-PLAYER.MAX_SPEED}},{key:'moveRight',value:function moveRight(){this.body.velocity.x=PLAYER.MAX_SPEED}}]),d}(Phaser.Sprite),Bullet=function(c){function d(f,g){_classCallCheck(this,d);var h=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f,0,0,g));return h.anchor.setTo(0.5,1),f.physics.enable(h,Phaser.Physics.ARCADE),h.outOfBoundsKill=!0,h.checkWorldBounds=!0,h}return _inherits(d,c),d}(Phaser.Sprite),Weapon=function(c){function d(f,g){_classCallCheck(this,d);var h=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f));return h.game=f,h.enableBody=!0,h.timer=0,h.addMultiple(g),h.setAll('exists',!1),h.physicsBodyType=Phaser.Physics.ARCADE,f.add.existing(h),h}return _inherits(d,c),_createClass(d,[{key:'fireBullet',value:function fireBullet(f,g,h){if(!(this.game.time.now<this.timer))for(var j=f+f-1,l=[0,20,-20,40,-40],m=void 0,n=0;n<j;n+=1)m=this.getFirstExists(!1),m&&(m.reset(g.x,g.y),m.angle=l[n],this.game.physics.arcade.velocityFromAngle(m.angle-90,BULLET.SPEED,m.body.velocity),m.body.velocity.y=-BULLET.SPEED*h),this.timer=game.time.now+(BULLET.SPACING+100*j)/h}}]),d}(Phaser.Group),game,gameState={preload:preload,create:create,update:update,render:render},player,playerHead,bar,barborder,cursors,scoreText,weapon,bullets=[],fireButton,whiteExplosions,redExplosions,whiteMartinis,whiteMartiniLaunchTimer,redMartinis,redMartiniLaunchTimer,hearts,pauseKey,gameOverText,fullScreenButton,fullScreenKey;function preload(){game.load.image('bar','assets/images/bar.png'),game.load.image('player','assets/images/Bartender_80_88_invert.png'),game.load.image('bullet','assets/images/green_olive_15_19.png'),game.load.image('white-martini','./assets/images/glass_80_115.png'),game.load.image('red-martini','./assets/images/redmartini.png'),game.load.spritesheet('white-explosion','assets/images/explode.png',133,95,6),game.load.spritesheet('red-explosion','assets/images/explode1.png',128,128,16),game.load.image('barborder','./assets/images/barborder.png'),game.load.image('playerhead','./assets/images/playerhead.png'),game.load.image('paused','./assets/images/paused.png'),game.load.image('heart','./assets/images/heart.png'),game.load.image('fullscreen','./assets/images/fullscreen.png')}function create(){game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.stage.forcePortrait=!0,game.physics.startSystem(Phaser.Physics.ARCADE),bar=game.add.tileSprite(0,0,800,600,'bar'),barborder=game.add.sprite(BAR.BORDER_POSITION_X,BAR.BORDER_POSITION_Y,'barborder'),game.physics.enable(barborder,Phaser.Physics.ARCADE),barborder.body.immovable=!0,gameOverText=game.add.text(game.world.centerX,game.world.centerY,GAME_VARIABLES.gameOverMessage,{font:'84px Arial',fill:'#fff'}),gameOverText.anchor.setTo(0.5,0.5),gameOverText.kill(),scoreText=game.add.text(600,550,'score: '+GAME_VARIABLES.score,{fontSize:'32px',fill:'#F00'});for(var c=0;10>c;c+=1)bullets.push(new Bullet(game,'bullet'));weapon=new Weapon(game,bullets),player=new Bartender(game,'player'),hearts=game.add.group(),addHearts(),cursors=game.input.keyboard.createCursorKeys(),fireButton=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),playerHead=game.add.sprite(PLAYER.HEAD.STARTING_POSITION_X,PLAYER.HEAD.STARTING_POSITION_Y,'playerhead'),game.physics.enable(playerHead,Phaser.Physics.ARCADE),whiteExplosions=getExplosions('white-explosion'),redExplosions=getExplosions('red-explosion'),whiteMartinis=getMartinis(killWhiteMartini,'white-martini'),redMartinis=getMartinis(killRedMartini,'red-martini'),launchWhiteMartini(),pauseKey=this.input.keyboard.addKey(Phaser.Keyboard.ESC),pauseKey.onDown.add(GameManager.togglePause,this),game.scale.fullScreenScaleMode=Phaser.ScaleManager.EXACT_FIT,fullScreenButton=game.add.button(game.width-32,0,'fullscreen',GameManager.toggleFullScreen,this),fullScreenKey=this.input.keyboard.addKey(Phaser.Keyboard.F),fullScreenKey.onDown.add(GameManager.toggleFullScreen,this)}function update(){player.body.velocity.setTo(0,0),playerHead.body.velocity.setTo(0,0),cursors.left.isDown?(player.moveLeft(),playerHead.body.velocity.x=-PLAYER.MAX_SPEED):cursors.right.isDown&&(player.moveRight(),playerHead.body.velocity.x=PLAYER.MAX_SPEED),player.alive&&(fireButton.isDown||game.input.activePointer.isDown)&&weapon.fireBullet(GAME_VARIABLES.weaponLevel,player,GAME_VARIABLES.factorDifficulty),player.x>game.width-50&&(player.x=game.width-50,playerHead.x=player.x-3),50>player.x&&(player.x=50,playerHead.x=player.x-3),game.physics.arcade.overlap(playerHead,whiteMartinis,playerCollide,null,this),game.physics.arcade.overlap(whiteMartinis,weapon,hitEnemy,null,this),game.physics.arcade.overlap(barborder,whiteMartinis,barCollide,null,this),game.physics.arcade.overlap(playerHead,redMartinis,playerCollide,null,this),game.physics.arcade.overlap(redMartinis,weapon,hitEnemy,null,this),game.physics.arcade.overlap(barborder,redMartinis,barCollide,null,this)}function render(){}function getExplosions(c){var d=game.add.group();return d.enableBody=!0,d.physicsBodyType=Phaser.Physics.ARCADE,d.createMultiple(30,c),d.setAll('anchor.x',0.5),d.setAll('anchor.y',0.5),d.forEach(function(f){return f.animations.add(c)}),d}function getMartinis(c,d){var f=game.add.group();return f.enableBody=!0,f.physicsBodyType=Phaser.Physics.ARCADE,f.createMultiple(5,d),f.setAll('anchor.x',0.5),f.setAll('anchor.y',0.5),f.setAll('scale.x',0.5),f.setAll('scale.y',0.5),f.setAll('angle',0),f.forEach(function(g){g.body.setSize(g.width,g.height),g.events.onKilled.add(c)}),f}function playerCollide(){hearts.callAll('kill'),player.kill(),endGame()}function barCollide(c,d){d.kill(),hearts.children.pop().kill(),player.lives-=1,0>=player.lives&&(player.kill(),endGame())}function hitEnemy(c,d){c.kill(),d.kill(),GAME_VARIABLES.score+='white-martini'===c.key?10:20,scoreText.text='score: '+GAME_VARIABLES.score,setDifficultyLevel()}function killWhiteMartini(c){killMartini(c,whiteExplosions,'white-explosion',MARTINI.whiteMartini.explosionSpeed)}function killRedMartini(c){killMartini(c,redExplosions,'red-explosion',MARTINI.redMartini.explosionSpeed)}function killMartini(c,d,f,g){var h=d.getFirstExists(!1);h.reset(c.body.x+c.body.halfWidth,c.body.y+c.body.halfHeight),h.body.velocity.y=c.body.velocity.y,h.alpha=0.7,h.play(f,g,!1,!0)}function launchWhiteMartini(){if(whiteMartiniLaunchTimer=game.time.events.add(game.rnd.integerInRange(MARTINI.whiteMartini.minimumDelay,MARTINI.whiteMartini.maximumDelay),launchWhiteMartini),player.alive&&!game.physics.arcade.isPaused){var c=whiteMartinis.getFirstExists(!1);c&&(c.reset(game.rnd.integerInRange(100,game.width-100),0),c.body.velocity.x=0,c.body.velocity.y=MARTINI.whiteMartini.initialSpeed)}}function launchRedMartini(){if(redMartiniLaunchTimer=game.time.events.add(game.rnd.integerInRange(MARTINI.redMartini.minimumDelay,MARTINI.redMartini.maximumDelay),launchRedMartini),player.alive&&!game.physics.arcade.isPaused)for(var l,c=game.rnd.integerInRange(100,game.width-100),f=70,j=void 0,k=0;k<5;k++)l=redMartinis.getFirstExists(!1),l&&(l.startingX=c,l.reset(game.width/2,-70*k),l.body.velocity.y=MARTINI.redMartini.initialSpeed,l.update=function(){this.body.x=this.startingX+Math.sin(this.y/f)*60,j=Math.cos((this.y+60)/f),this.scale.x=0.5-Math.abs(j)/8,this.angle=0-2*j})}function addHearts(){for(var c=0;c<player.lives;c+=1)hearts.create(5+33*c,560,'heart')}function endGame(){playerHead.kill(),game.time.events.remove(redMartiniLaunchTimer),game.time.events.remove(whiteMartiniLaunchTimer),whiteMartinis.callAll('kill'),redMartinis.callAll('kill'),GameManager.addHighscore(),gameOverText.revive(),hearts.children=[],spaceRestart=fireButton.onDown.addOnce(restart,this)}function restart(){gameOverText.kill(),player.alive=!0,player.reset(PLAYER.STARTING_POSITION_X,PLAYER.STARTING_POSITION_Y),playerHead.reset(PLAYER.HEAD.STARTING_POSITION_X,PLAYER.HEAD.STARTING_POSITION_Y),resetStartingGameStats(),launchWhiteMartini()}function resetStartingGameStats(){resetScore(),resetLives(),resetDifficulty()}function resetScore(){GAME_VARIABLES.score=0,scoreText.text='score: '+GAME_VARIABLES.score}function resetLives(){player.lives=3,addHearts()}function resetDifficulty(){GAME_VARIABLES.factorDifficulty=1,GAME_VARIABLES.weaponLevel=1,MARTINI.whiteMartini.initialSpeed=100,MARTINI.whiteMartini.minimumDelay=1e3,MARTINI.whiteMartini.maximumDelay=3e3,MARTINI.redMartini.initialSpeed=50,MARTINI.redMartini.minimumDelay=1e4,MARTINI.redMartini.maximumDelay=14000}function setDifficultyLevel(){switch(GAME_VARIABLES.score){case 50:GAME_VARIABLES.factorDifficulty=1.1;break;case 100:GAME_VARIABLES.factorDifficulty=1.2;break;case 200:GAME_VARIABLES.factorDifficulty=1.4;break;case 300:GAME_VARIABLES.factorDifficulty=1.6,GAME_VARIABLES.weaponLevel=2,launchRedMartini();break;case 400:case 410:GAME_VARIABLES.factorDifficulty=1.8;break;case 500:case 510:GAME_VARIABLES.factorDifficulty=2,GAME_VARIABLES.weaponLevel=3;break;default:return;}(function(){MARTINI.whiteMartini.minimumDelay=1e3/GAME_VARIABLES.factorDifficulty,MARTINI.whiteMartini.maximumDelay=3e3/GAME_VARIABLES.factorDifficulty,MARTINI.whiteMartini.initialSpeed=100*GAME_VARIABLES.factorDifficulty,MARTINI.redMartini.minimumDelay=6e3/GAME_VARIABLES.factorDifficulty,MARTINI.redMartini.maximumDelay=1e4/GAME_VARIABLES.factorDifficulty,MARTINI.redMartini.initialSpeed=60*GAME_VARIABLES.factorDifficulty})()}var SvgUtils=function(){function c(){_classCallCheck(this,c)}return _createClass(c,null,[{key:'createSVG',value:function createSVG(d,f){var g=document.createElementNS('http://www.w3.org/2000/svg',d);for(var h in f)g.setAttribute(h,f[h]);return g}}]),c}(),MainMenu=function(){function c(d){_classCallCheck(this,c),'undefind'==typeof d&&(d=[]),this._playerName='Bartender',this._highscores=[['Bartender',10000],['Bartender',1000],['Bartender',100],['Bartender',10],['Bartender',0]]}return _createClass(c,[{key:'updateHighscores',value:function updateHighscores(d){this._highscores.push([this._playerName,d]),this._highscores.sort(function(f,g){return g[1]-f[1]}),this._highscores.pop()}},{key:'load',value:function load(){var d=['Start Game','Controls','Highscores','Credits','Quit Game'],f=['start','controls','highscores','credits','quit'],g=document.createElementNS('http://www.w3.org/2000/svg','svg'),j=240,q=80;g.setAttribute('id','svgCon'),g.setAttribute('width',800),g.setAttribute('height',600),g.setAttribute('viewBox','0 0 800 600'),g.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns','http://www.w3.org/2000/svg'),g.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink');var r=SvgUtils.createSVG('image',{id:'logo',width:756,height:152,x:'22',y:'50'});r.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/logo.png'),g.appendChild(r);for(var t,s=1;20>=s;s+=1){if(t=SvgUtils.createSVG('image',{'class':'background-glass',y:-200,style:'pointer-events: none;',width:80,height:115}),0==s%3&&t.setAttribute('transform','rotate(45)'),0==s%2){t.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/glass_80_115.png'),t.setAttribute('x','-200');var u=SvgUtils.createSVG('animate',{attributeName:'x',from:-40*s-100,to:900+40*s,dur:s%5+s+'s',attributeType:'XML',repeatCount:'indefinite',begin:s%3+s+'s'});t.appendChild(u)}else{t.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/redmartini.png'),t.setAttribute('x','1000');var v=SvgUtils.createSVG('animate',{attributeName:'x',from:900+40*s,to:-40*s-100,dur:s%6+s+'s',attributeType:'XML',repeatCount:'indefinite',begin:s%3+s+'s'});t.appendChild(v)}var w=SvgUtils.createSVG('animate',{attributeName:'y',from:-300,to:1e3,dur:s%5+s+'s',attributeType:'XML',repeatCount:'indefinite',begin:s%3+s+'s'});t.appendChild(w),g.appendChild(t)}for(var y in d){var z=SvgUtils.createSVG('rect',{'class':'button-menu',width:j,height:50,id:f[y],rx:'10',ry:'10',x:270,y:y*q+210});z.addEventListener('click',this.onClick,!1);var A=SvgUtils.createSVG('text',{'class':'button-text',x:270+j/(4*d[y].length),y:y*q+250,textLength:j-(0|j/(2*d[y].length)),lengthAdjust:'spacingAndGlyphs',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'40px'});A.innerHTML=d[y],g.appendChild(A),g.appendChild(z)}var B=document.getElementById('top');null===B&&(B=document.createElement('div'),B.setAttribute('id','top'),document.body.appendChild(B)),B.appendChild(g)}},{key:'onBodyResize',value:function onBodyResize(){var d=this.innerWidth,f=this.innerHeight,g=0>(0|(d-800)/2)?0:0|(d-800)/2,h=0>(0|(f-600)/2)?0:0|(f-600)/2,j=this.document.getElementById('top');null!==j&&j.setAttribute('style','margin-left: '+g+'px; margin-top: '+h+'px;')}},{key:'onClick',value:function onClick(){var d=this.id;if('start'===d)document.getElementById('svgCon').style.display='none',GameManager.startGame();else if('controls'===d||'highscores'===d||'credits'===d){var f=document.getElementById('svgCon'),g=SvgUtils.createSVG('rect',{'class':'info-panel',width:600,height:480,id:'info',rx:'20',ry:'20',x:100,y:100}),j=180,m='Close',n=SvgUtils.createSVG('text',{'class':'button-text',x:320,y:555,id:'button-label',textLength:j-(0|j/m.length),lengthAdjust:'spacingAndGlyphs',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'30px'});n.innerHTML=m;var o=SvgUtils.createSVG('rect',{'class':'button-close',width:j,height:40,id:'close',rx:'10',ry:'10',x:300,y:520}),p=[];if(o.addEventListener('click',function(){var W=document.getElementById('button-label'),X=document.getElementById('close'),Y=document.getElementById('info');W.remove(),X.remove(),Y.remove();var Z=document.getElementById('nickname-input');p.forEach(function($){return $.remove()}),this.removeEventListener('click',function(){}),null!==Z&&Z.value!==mainMenu.playerName&&(mainMenu.playerName=Z.value)}),f.appendChild(g),f.appendChild(n),f.appendChild(o),'controls'===d){var q=SvgUtils.createSVG('text',{'class':'title-text',x:240,y:160,id:'controls-title',lengthAdjust:'spacingAndGlyphs',textLength:2*j-(0|j/m.length),fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'40pt'});q.innerHTML='Controls',p.push(q);var r=SvgUtils.createSVG('foreignObject',{'class':'title-text',x:400,y:220,width:280,height:50}),s=document.createElement('div');s.setAttribute('xmlns','http://www.w3.org/1999/xhtml');var t=document.createElement('input');t.setAttribute('type','text'),t.setAttribute('id','nickname-input'),t.setAttribute('value',mainMenu.playerName),s.appendChild(t),r.appendChild(s),p.push(r);var u=SvgUtils.createSVG('text',{'class':'title-text',x:240,y:260,id:'controls-title',lengthAdjust:'spacingAndGlyphs',textLength:j-(0|j/m.length),fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'24pt'});u.innerHTML='Nickname:',p.push(u);var v=SvgUtils.createSVG('image',{'class':'control-image',x:210,y:320,style:'pointer-events: none;'});v.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/leftArrow.png');var w=SvgUtils.createSVG('animate',{attributeName:'opacity',values:'1;0;1',dur:'2s',repeatCount:'indefinite'});v.appendChild(w),p.push(v);var y=SvgUtils.createSVG('image',{'class':'control-image',x:370,y:320,style:'pointer-events: none;'});y.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/rightArrow.png');var z=SvgUtils.createSVG('animate',{attributeName:'opacity',values:'0;1;0',dur:'2s',repeatCount:'indefinite'});y.appendChild(z),p.push(y);var A=SvgUtils.createSVG('text',{'class':'title-text',x:480,y:350,id:'controls-title',lengthAdjust:'spacingAndGlyphs',fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'24pt'});A.innerHTML='Movement',p.push(A);var B=SvgUtils.createSVG('image',{'class':'control-image',x:140,y:380,style:'pointer-events: none;'});B.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/space.png');var C=SvgUtils.createSVG('animate',{attributeName:'opacity',values:'0;1;0',dur:'1s',repeatCount:'indefinite'});B.appendChild(C),p.push(B);var D=SvgUtils.createSVG('text',{'class':'title-text',x:500,y:410,id:'controls-title',lengthAdjust:'spacingAndGlyphs',fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'24pt'});D.innerHTML='Attack',p.push(D);var E=SvgUtils.createSVG('image',{'class':'control-image',x:290,y:440,style:'pointer-events: none;'});E.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','assets/images/esc.png');var F=SvgUtils.createSVG('animate',{attributeName:'opacity',values:'0;1;0',dur:'3s',repeatCount:'indefinite'});E.appendChild(F),p.push(E);var G=SvgUtils.createSVG('text',{'class':'title-text',x:440,y:470,id:'controls-title',lengthAdjust:'spacingAndGlyphs',fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'24pt'});G.innerHTML='Pause / Menu',p.push(G),p.forEach(function(W){return f.appendChild(W)})}if('highscores'===d){var H=SvgUtils.createSVG('text',{'class':'title-text',x:240,y:160,id:'controls-title',lengthAdjust:'spacingAndGlyphs',textLength:2*j-(0|j/m.length),fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'40pt'});H.innerHTML='Highscores',p.push(H);for(var K,I=SvgUtils.createSVG('symbol',{id:'text-symbol'}),J=0;J<mainMenu._highscores.length;J+=1){K=SvgUtils.createSVG('text',{'class':'highscore-text-username',x:140,y:250+50*J}),K.innerHTML=''+(J+1)+'. '+mainMenu._highscores[J][0],I.appendChild(K);var L=''+mainMenu._highscores[J][1],M=SvgUtils.createSVG('text',{'class':'highscore-text-username',x:660-30*L.length,y:250+50*J});M.innerHTML=L,I.appendChild(M)}p.push(I);for(var O,N=0;5>N;N+=1)O=SvgUtils.createSVG('use',{'class':'text-username-use'}),O.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#text-symbol'),p.push(O)}if('credits'===d){var P=['Arnaudov_St','bobi_dobroto','dreadlocker','gchankov','ludzhev','martinboykov','rosen.urkov'],Q=SvgUtils.createSVG('text',{'class':'title-text',x:240,y:160,id:'controls-title',lengthAdjust:'spacingAndGlyphs',textLength:2*j-(0|j/m.length),fill:'#fff',stroke:'#ff0000','font-family':'Copperplate Gothic Light','font-size':'40pt'});Q.innerHTML='Credits',p.push(Q);for(var R=0;R<P.length;R+=1){var S=SvgUtils.createSVG('path',{id:'path'+R}),T=SvgUtils.createSVG('animate',{attributeName:'d',from:'m280,200 h0',to:'m280,500 h400',dur:'24s',begin:3*R+'s',repeatCount:'indefinite'});S.appendChild(T),p.push(S);var U=SvgUtils.createSVG('text',{fill:'#7FFF00','font-family':'Copperplate Gothic Light','font-size':'24pt'}),V=SvgUtils.createSVG('textPath');V.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#path'+R),V.innerHTML=P[R],U.appendChild(V),p.push(U)}}p.forEach(function(W){return f.appendChild(W)})}else'quit'===d&&(window.removeEventListener('load',function(){}),window.removeEventListener('resize',mainMenu.onBodyResize),window.location.href=GAME_VARIABLES.repositoryHref)}},{key:'playerName',get:function get(){return this._playerName},set:function set(d){this._playerName=d}}]),c}(),mainMenu=new MainMenu;window.onload=function(){mainMenu.load(),mainMenu.onBodyResize.call(this),this.addEventListener('resize',mainMenu.onBodyResize,!1)};var GameManager=function(){function c(){_classCallCheck(this,c)}return _createClass(c,null,[{key:'startGame',value:function startGame(){game?c.togglePause():(document.getElementById('svgCon').style.display='none',game=new Phaser.Game(800,600,Phaser.CANVAS,'gameContainer',gameState))}},{key:'togglePause',value:function togglePause(){game.physics.arcade.isPaused=!game.physics.arcade.isPaused,game.physics.arcade.isPaused?c.showMenu():c.removeMenu()}},{key:'toggleFullScreen',value:function toggleFullScreen(){game.scale.isFullScreen?game.scale.stopFullScreen():game.scale.startFullScreen(!0)}},{key:'addHighscore',value:function addHighscore(){mainMenu.updateHighscores(GAME_VARIABLES.score)}},{key:'removeMenu',value:function removeMenu(){document.getElementById('svgCon').style.display='none',document.getElementsByTagName('canvas')[0].style.display='block'}},{key:'showMenu',value:function showMenu(){document.getElementsByTagName('canvas')[0].style.display='none',document.getElementById('svgCon').style.display='inline-block'}}]),c}();